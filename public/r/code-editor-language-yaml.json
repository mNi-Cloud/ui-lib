{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "code-editor-language-yaml",
  "type": "registry:file",
  "title": "YAML Language Plugin for Code Editor",
  "description": "YAML language support for Monaco Code Editor.",
  "dependencies": [
    "monaco-editor",
    "yaml"
  ],
  "registryDependencies": [
    "https://raw.github.com/mNi-Cloud/ui-lib/main/public/r/code-editor.json"
  ],
  "files": [
    {
      "path": "registry/new-york/blocks/language-plugin/yaml.ts",
      "content": "import type { LanguagePlugin } from './index';\nimport * as yaml from 'yaml';\n\n/**\n * モナコエディタのYAML言語サポートを提供するプラグイン。\n * yamlライブラリを使用して独自にバリデーションを実装します。\n */\nconst YamlPlugin: LanguagePlugin = {\n  language: 'yaml',\n  \n  // 言語サポートをロードする関数\n  load: async () => {\n    // yamlパッケージは依存関係として追加する必要があります\n    // npm install yaml\n    return Promise.resolve();\n  },\n  \n  // エディタインスタンスに言語設定を適用する関数\n  configure: (monaco: any) => {\n    try {\n      // YAML用のシンプルなマーカーを登録\n      const yamlDiagnosticsOwner = 'yaml-validator';\n      \n      // バリデーション関数を定義\n      const validateYaml = (code: string, model: any) => {\n        // 既存のマーカーをクリア\n        monaco.editor.setModelMarkers(model, yamlDiagnosticsOwner, []);\n        \n        // 空のコードはバリデーションをスキップ\n        if (!code.trim()) return;\n        \n        try {\n          // YAMLをパース（バリデーション）\n          yaml.parse(code);\n        } catch (error: any) {\n          // yamlライブラリのエラー形式に合わせてエラー処理\n          if (error.linePos && error.linePos.start) {\n            // エラーマーカーを作成\n            const { line, col } = error.linePos.start;\n            const startLineNumber = line;\n            const startColumn = col;\n            const endLineNumber = error.linePos.end?.line || startLineNumber;\n            const endColumn = error.linePos.end?.col || (startColumn + 1);\n            \n            // マーカーをセット\n            monaco.editor.setModelMarkers(model, yamlDiagnosticsOwner, [{\n              severity: monaco.MarkerSeverity.Error,\n              message: error.message || 'YAMLの構文エラー',\n              startLineNumber,\n              startColumn,\n              endLineNumber,\n              endColumn\n            }]);\n          } else {\n            // 位置情報がない場合は、一般的なエラーとして表示\n            monaco.editor.setModelMarkers(model, yamlDiagnosticsOwner, [{\n              severity: monaco.MarkerSeverity.Error,\n              message: error.message || 'YAMLの構文エラー',\n              startLineNumber: 1,\n              startColumn: 1,\n              endLineNumber: 1,\n              endColumn: 2\n            }]);\n          }\n        }\n      };\n      \n      // モデル変更イベントリスナーを追加\n      const setupModelChangeListener = (model: any) => {\n        if (model.getLanguageId() === 'yaml') {\n          // 初期バリデーション\n          validateYaml(model.getValue(), model);\n          \n          // 変更時にバリデーション\n          model.onDidChangeContent(() => {\n            validateYaml(model.getValue(), model);\n          });\n        }\n      };\n      \n      // 既存のモデルに適用\n      monaco.editor.getModels().forEach(setupModelChangeListener);\n      \n      // 新しいモデルにも適用\n      monaco.editor.onDidCreateModel(setupModelChangeListener);\n      \n    } catch (error) {\n      console.error('YAML設定中にエラーが発生しました:', error);\n    }\n  }\n};\n\nexport default YamlPlugin; ",
      "type": "registry:file",
      "target": "lib/language-plugin/yaml.ts"
    }
  ]
}